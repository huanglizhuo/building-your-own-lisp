##列表和lisp

  lisp 因它的数据和代码基本没有区别而知名。它们都是由同样的结构表示。这就让 lisp 具有了其它语言所没有的强大威力。如果想把这种特性加入到我们的编程语言中，我们需要把读入和计算分开。

  这章最后的结果和前面的章节有些不同。因为我们将要改变内部处理代码的过程。这叫做做 re-factoring 这会让我们之后的工作更轻松。像准备晚餐一样，我们把食物摆在盘子里不代表我们在浪费时间。有时候期待晚餐比吃晚餐更美好。

  ![All CAPS SO RIGHT YET SO WRONG](./lisp.png)

  我们需要建立一张有数字符号和列表递归构建内部列表来存储我们的代码。在 Lisp 中这个结构体叫做 S 表达式  Symbolic Expression(符号表达式)。我们将会扩展我们的 `lval` 结构体来表示它。评估 S表达式的过程是 lisp 语言的典型过程。评估一个S表达式，我们首先把列表的第一个表项当做操作符。然后遍历剩下的表项，并把它们当做操作数来最后得到结果。

  介绍过S表达式后，我们将正真进入到Lisp的世界。

##指针

  在C语言中列表的概念是通过合适的指针操作实现的。指针是C语言的难点。指针很难学因为它的概念很简单，但有很多新术语，而且经常没有很明确的用例。这让指针的概念变的异常麻烦。幸运的是，我们有很多很好的用例，它们都是C中典型的，而且会囊括指针90%的用法。

  我们需要指针的原因是由于函数调用的工作方式，当你在C中调用函数时参数往往是按值传递的。就是说传给函数的是一个拷贝而已。比如`int` `long` `char` 以及自定义的结构体 `lval` 都是。大多数情形下都没有问题但有时候会带来麻烦。

  最通常的一个问题就是当我们想给函数传递一个很大的机构体时，每次我们调用函数时都要复制一份这个结构体，这样就会耗费大量的空间。

  领一个问题就是，当我们定义了一个结构体，它的大小事可变的
